<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ankush & Swati ‚Äì Invite Composer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="images/favicon.png" />

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet" />

  <style>
    :root {
      --mehendi: #800020;
      --mehendi-dark: #5C0015;
      --mehendi-light: #A03050;
      --turmeric: #D4AF37;
      --turmeric-dark: #B8960C;
      --turmeric-light: #F4D03F;
      --coral: #DC143C;
      --coral-dark: #B01030;
      --coral-light: #FF6B6B;
      --cream: #FFF9F5;
      --cream-dark: #F5E6D8;
      --text-dark: #2D1F1F;
      --text-medium: #4A3535;
      --text-light: #7A5555;
      --brown: #5C3D3D;
      --gradient-festive: linear-gradient(135deg, #D4AF37 0%, #DC143C 50%, #800020 100%);
      --gradient-warm: linear-gradient(180deg, #FFF9F5 0%, #F5E6D8 100%);
      --gradient-mehendi: linear-gradient(135deg, #A03050 0%, #800020 50%, #5C0015 100%);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Poppins", system-ui, sans-serif;
      background: var(--gradient-warm);
      color: var(--text-dark);
    }

    .page {
      max-width: 900px;
      margin: 0 auto;
      padding: 18px 16px 40px;
    }

    header {
      text-align: center;
      padding: 18px 12px 10px;
    }

    .title {
      font-family: "Playfair Display", serif;
      font-size: 1.9rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: var(--mehendi-dark);
    }

    .title span { color: var(--coral); }

    .subtitle {
      font-size: 0.92rem;
      color: var(--text-light);
      margin-top: 4px;
    }

    .pill-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 6px;
      font-size: 0.8rem;
    }

    .pill {
      padding: 3px 10px;
      border-radius: 999px;
      background: rgba(212, 175, 55, 0.12);
      color: var(--brown);
      border: 1px solid rgba(212, 175, 55, 0.4);
    }

    .card {
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(92, 0, 21, 0.08);
      padding: 16px 14px 18px;
      margin-top: 18px;
      border: 1px solid rgba(128, 0, 32, 0.08);
    }

    .card h2 {
      font-size: 1.05rem;
      margin: 0 0 8px;
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--mehendi-dark);
    }

    label {
      display: block;
      font-size: 0.9rem;
      margin-top: 10px;
      color: var(--text-dark);
    }

    input[type="text"],
    input[type="url"],
    select,
    textarea {
      width: 100%;
      margin-top: 4px;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(128, 0, 32, 0.2);
      font-family: inherit;
      font-size: 0.9rem;
      outline: none;
      background: #fffdf9;
      color: var(--text-dark);
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--mehendi);
      background: #ffffff;
    }

    .field-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .field-row > div { flex: 1 1 200px; }

    .hint {
      font-size: 0.8rem;
      color: var(--text-light);
      margin-top: 3px;
    }

    .events { margin-top: 6px; }

    .events label {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 6px;
      font-size: 0.9rem;
      color: var(--text-medium);
    }

    .events input[type="checkbox"] {
      width: auto;
      accent-color: var(--mehendi);
    }

    button, .btn {
      margin-top: 14px;
      padding: 10px 16px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.92rem;
      font-weight: 500;
      background: var(--gradient-festive);
      color: var(--cream);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: 0 8px 18px rgba(92, 0, 21, 0.35);
      text-decoration: none;
    }

    button:active, .btn:active {
      transform: translateY(1px);
    }

    .btn-whatsapp {
      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
      color: #ffffff;
    }

    .btn-email {
      background: linear-gradient(135deg, #EA4335 0%, #B72A1F 100%);
      color: #ffffff;
    }

    .btn-sms {
      background: linear-gradient(135deg, #5B8DEF 0%, #3B5998 100%);
      color: #ffffff;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    textarea#output {
      min-height: 300px;
      resize: vertical;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    .footer-note {
      margin-top: 16px;
      font-size: 0.8rem;
      color: var(--text-light);
      text-align: center;
    }

    .hidden { display: none !important; }

    .send-options-label {
      font-size: 0.85rem;
      color: var(--text-medium);
      margin-top: 16px;
      margin-bottom: 6px;
      font-weight: 500;
    }

    .char-count {
      font-size: 0.75rem;
      color: var(--text-light);
      text-align: right;
      margin-top: 4px;
    }

    .char-count.warning { color: #e67e22; }
    .char-count.danger { color: #e74c3c; }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="title">Ankush <span>&amp;</span> Swati</div>
      <div class="subtitle">Wedding Invite Composer</div>
      <div class="pill-row">
        <div class="pill">WhatsApp ¬∑ Email ¬∑ SMS</div>
        <div class="pill">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä ¬∑ English ¬∑ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</div>
      </div>
    </header>

    <section class="card">
      <h2>Guest & Language</h2>

      <label>
        Guest name
        <input type="text" id="guestName" placeholder="e.g. Rajesh uncle, Priya didi" />
        <div class="hint">Use how you'd naturally address them</div>
      </label>

      <div class="field-row">
        <div>
          <label>
            Language
            <select id="language">
              <option value="en" selected>English</option>
              <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
              <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bangla)</option>
            </select>
          </label>
        </div>
        <div>
          <label>
            Tone
            <select id="tone">
              <option value="formal" selected>Formal (elders, seniors)</option>
              <option value="neutral">Warm (relatives, colleagues)</option>
              <option value="casual">Casual (friends, cousins)</option>
            </select>
          </label>
        </div>
      </div>

      <label>
        Personal touch (optional)
        <input type="text" id="personalNote" placeholder="e.g. It's been too long since we met!" />
        <div class="hint">Add something personal to make it feel genuine</div>
      </label>
    </section>

    <section class="card">
      <h2>Who's Sending?</h2>

      <label>
        Your name
        <input type="text" id="senderName" placeholder="e.g. Ankush & Swati, Sundeep, Shaw Family" />
        <div class="hint">This appears at the end of the invite</div>
      </label>
    </section>

    <section class="card">
      <h2>Events</h2>
      <div class="hint">Which events is this guest invited to?</div>

      <div class="events">
        <label><input type="checkbox" value="haldi" /> Haldi & Mehndi ‚Äì 23 Feb</label>
        <label><input type="checkbox" value="sangeet" /> Sangeet & Matkor ‚Äì 24 Feb</label>
        <label><input type="checkbox" value="wedding" /> Wedding Ceremony ‚Äì 25 Feb</label>
        <label><input type="checkbox" value="reception" /> Reception on the River ‚Äì 28 Feb</label>
      </div>
    </section>

    <section class="card">
      <h2>Website</h2>
      <input type="url" id="siteLink" value="https://sundeep739.github.io/ankush-swati-wedding/" />
      <button id="generateBtn">‚ú® Generate Invite</button>
    </section>

    <section class="card">
      <h2>Your Invite</h2>
      <textarea id="output" readonly placeholder="Your invite will appear here..."></textarea>
      <div class="char-count" id="charCount"></div>

      <div class="send-options-label hidden" id="sendLabel">Send via:</div>

      <div class="btn-row">
        <a id="whatsappBtn" class="btn btn-whatsapp hidden" href="#" target="_blank">WhatsApp</a>
        <a id="emailBtn" class="btn btn-email hidden" href="#" target="_blank">Email</a>
        <a id="smsBtn" class="btn btn-sms hidden" href="#" target="_blank">SMS</a>
        <button id="copyBtn" class="btn hidden" style="background: var(--gradient-mehendi);">üìã Copy</button>
      </div>
    </section>

    <div class="footer-note">For family use only ¬∑ Made with ‚ù§Ô∏è</div>
  </div>

  <script>
    const eventLabels = {
      en: {
        haldi: "Haldi & Mehndi (23rd Feb)",
        sangeet: "Sangeet & Matkor (24th Feb)",
        wedding: "Wedding (25th Feb)",
        reception: "Reception on the River (28th Feb)"
      },
      hi: {
        haldi: "‡§π‡§≤‡•ç‡§¶‡•Ä-‡§Æ‡•á‡§π‡§Ç‡§¶‡•Ä (23 ‡§´‡§º‡§∞‡§µ‡§∞‡•Ä)",
        sangeet: "‡§∏‡§Ç‡§ó‡•Ä‡§§-‡§Æ‡§ü‡§ï‡•ã‡§∞ (24 ‡§´‡§º‡§∞‡§µ‡§∞‡•Ä)",
        wedding: "‡§∂‡•Å‡§≠ ‡§µ‡§ø‡§µ‡§æ‡§π (25 ‡§´‡§º‡§∞‡§µ‡§∞‡•Ä)",
        reception: "‡§∞‡§ø‡§∏‡•á‡§™‡•ç‡§∂‡§® (28 ‡§´‡§º‡§∞‡§µ‡§∞‡•Ä)"
      },
      bn: {
        haldi: "‡¶ó‡¶æ‡¶Ø‡¶º‡ßá ‡¶π‡¶≤‡ßÅ‡¶¶ ‡¶ì ‡¶Æ‡ßá‡¶π‡ßá‡¶®‡ßç‡¶¶‡¶ø (‡ß®‡ß© ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø)",
        sangeet: "‡¶∏‡¶ô‡ßç‡¶ó‡ßÄ‡¶§ ‡¶ì ‡¶Æ‡¶æ‡¶ü‡¶ø‡¶ï‡ßã‡¶∞ (‡ß®‡ß™ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø)",
        wedding: "‡¶∂‡ßÅ‡¶≠ ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π (‡ß®‡ß´ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø)",
        reception: "‡¶∞‡¶ø‡¶∏‡ßá‡¶™‡¶∂‡¶® (‡ß®‡ßÆ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø)"
      }
    };

    const emailSubjects = {
      en: "Wedding Invitation ‚Äì Ankush & Swati",
      hi: "‡§∂‡•Å‡§≠ ‡§µ‡§ø‡§µ‡§æ‡§π ‡§ï‡§æ ‡§®‡§ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡§£ ‚Äì ‡§Ö‡§Ç‡§ï‡•Å‡§∂ ‡§è‡§µ‡§Ç ‡§∏‡•ç‡§µ‡§æ‡§§‡§ø",
      bn: "‡¶∂‡ßÅ‡¶≠ ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π‡ßá‡¶∞ ‡¶®‡¶ø‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ ‚Äì ‡¶Ö‡¶ô‡ßç‡¶ï‡ßÅ‡¶∂ ‡¶ì ‡¶∏‡ßç‡¶¨‡¶æ‡¶§‡ßÄ"
    };

    // Sign-off phrases
    const signOffPhrases = {
      en: {
        casual: "Cheers,",
        neutral: "Warm regards,",
        formal: "With pranaam and regards,"
      },
      hi: {
        casual: "",
        neutral: "‡§∏‡•ç‡§®‡•á‡§π ‡§∏‡§π‡§ø‡§§,",
        formal: "‡§∏‡§æ‡§¶‡§∞ ‡§™‡•ç‡§∞‡§£‡§æ‡§Æ,"
      },
      bn: {
        casual: "",
        neutral: "‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ‡¶∏‡¶π,",
        formal: "‡¶∏‡¶∂‡ßç‡¶∞‡¶¶‡ßç‡¶ß ‡¶™‡ßç‡¶∞‡¶£‡¶æ‡¶Æ,"
      }
    };

    function formatEventList(lang, selected) {
      if (selected.length === 0) return "";
      if (selected.length === 1) return eventLabels[lang][selected[0]];
      if (selected.length === 2) {
        const connector = lang === "en" ? " and " : (lang === "hi" ? " ‡§î‡§∞ " : " ‡¶ì ");
        return eventLabels[lang][selected[0]] + connector + eventLabels[lang][selected[1]];
      }
      const lastEvent = selected.pop();
      const connector = lang === "en" ? ", and " : (lang === "hi" ? ", ‡§î‡§∞ " : ", ‡¶ì ");
      return selected.map(e => eventLabels[lang][e]).join(", ") + connector + eventLabels[lang][lastEvent];
    }

    function getSenderName(lang) {
      const custom = document.getElementById("senderName").value.trim();
      if (custom) return custom;
      
      // Default fallback
      const defaults = {
        en: "The Shaw Family",
        hi: "‡§∂‡•â ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞",
        bn: "‡¶∂ ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞"
      };
      return defaults[lang];
    }

    function getSignOff(lang, tone) {
      const phrase = signOffPhrases[lang][tone];
      const sender = getSenderName(lang);
      
      if (tone === "casual") {
        if (lang === "en") return `Cheers,\n${sender}`;
        return `‚Äì ${sender}`;
      }
      return `${phrase}\n${sender}`;
    }

    function buildMessage() {
      const name = document.getElementById("guestName").value.trim();
      const lang = document.getElementById("language").value;
      const tone = document.getElementById("tone").value;
      const note = document.getElementById("personalNote").value.trim();
      const siteLink = document.getElementById("siteLink").value.trim();

      const checkboxes = document.querySelectorAll(".events input[type=checkbox]");
      const selected = [];
      checkboxes.forEach(cb => { if (cb.checked) selected.push(cb.value); });

      let msg = "";
      const signOff = getSignOff(lang, tone);

      // ==================== ENGLISH ====================
      if (lang === "en") {
        
        // CASUAL
        if (tone === "casual") {
          msg += `Hey ${name || "there"}! üëã\n\n`;
          msg += `Guess what ‚Äì Ankush and Swati are getting married! üéâ\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `It's all happening in Kolkata and it wouldn't be the same without you!\n\n`;
          if (selected.length > 0) {
            msg += `You're invited to:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `All the details are here:\n`;
          msg += `${siteLink}\n\n`;
          msg += `Let us know you're coming ‚Äì can't wait to see you!\n\n`;
          msg += signOff;
        }
        
        // NEUTRAL
        else if (tone === "neutral") {
          msg += `Dear ${name || "Friend"},\n\n`;
          msg += `We're thrilled to share some wonderful news ‚Äì Ankush and Swati are getting married! üíê\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `The wedding celebrations will take place in Kolkata this February, and we would be so happy to have you celebrate with us.\n\n`;
          if (selected.length > 0) {
            msg += `We'd love for you to join us at:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `All the details and RSVP are on our wedding website:\n`;
          msg += `${siteLink}\n\n`;
          msg += `Your presence would truly make this occasion more joyful.\n\n`;
          msg += signOff;
        }
        
        // FORMAL
        else {
          msg += `‡•• ‡§∂‡•ç‡§∞‡•Ä ‡§ó‡§£‡•á‡§∂‡§æ‡§Ø ‡§®‡§Æ‡§É ‡••\n\n`;
          msg += `Respected ${name || "Sir/Ma'am"},\n\n`;
          msg += `Namaskar.\n\n`;
          msg += `With the divine blessings of Lord Ganesha and our elders, we are overjoyed to announce the wedding of Ankush and Swati.\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `The wedding ceremonies will be held in Kolkata this February. Your gracious presence and blessings would be our greatest honour.\n\n`;
          if (selected.length > 0) {
            msg += `We humbly request you to grace us at:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `For complete details and to kindly confirm your attendance:\n`;
          msg += `${siteLink}\n\n`;
          msg += `Your ashirwad means everything to us.\n\n`;
          msg += signOff;
        }
      }

      // ==================== HINDI ====================
      if (lang === "hi") {
        
        // CASUAL
        if (tone === "casual") {
          msg += `‡§Ö‡§∞‡•á ${name || "‡§Ø‡§æ‡§∞"}! üëã\n\n`;
          msg += `‡§∏‡•Å‡§® ‚Äì ‡§Ö‡§Ç‡§ï‡•Å‡§∂ ‡§î‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§§‡§ø ‡§ï‡•Ä ‡§∂‡§æ‡§¶‡•Ä ‡§π‡•à! üéâ\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `‡§ï‡•ã‡§≤‡§ï‡§æ‡§§‡§æ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§ó‡•Ä, ‡§§‡•Ç ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ ‡§§‡•ã ‡§ï‡•à‡§∏‡•á ‡§ö‡§≤‡•á‡§ó‡§æ!\n\n`;
          if (selected.length > 0) {
            msg += `‡§§‡•á‡§∞‡§æ invite:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `‡§∏‡§æ‡§∞‡•Ä details ‡§Ø‡§π‡§æ‡§Å:\n`;
          msg += `${siteLink}\n\n`;
          msg += `‡§¨‡§§‡§æ ‡§¶‡•á ‡§ï‡§ø ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à ‚Äì ‡§Æ‡§ø‡§≤‡§§‡•á ‡§π‡•à‡§Ç!\n\n`;
          msg += signOff;
        }
        
        // NEUTRAL
        else if (tone === "neutral") {
          msg += `‡§™‡•ç‡§∞‡§ø‡§Ø ${name || "‡§ú‡•Ä"},\n\n`;
          msg += `‡§¨‡§°‡§º‡•Ä ‡§ñ‡•Å‡§∂‡•Ä ‡§∏‡•á ‡§¨‡§§‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§Ö‡§Ç‡§ï‡•Å‡§∂ ‡§î‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§§‡§ø ‡§ï‡•Ä ‡§∂‡§æ‡§¶‡•Ä ‡§§‡§Ø ‡§π‡•ã ‡§ó‡§à ‡§π‡•à! üíê\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `‡§á‡§∏ ‡§´‡§º‡§∞‡§µ‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§≤‡§ï‡§æ‡§§‡§æ ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§¶‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§∞‡•á functions ‡§π‡•ã‡§Ç‡§ó‡•á‡•§ ‡§Ü‡§™ ‡§Ü‡§è‡§Å‡§ó‡•á ‡§§‡•ã ‡§π‡§Æ‡•á‡§Ç ‡§¨‡•á‡§π‡§¶ ‡§ñ‡•Å‡§∂‡•Ä ‡§π‡•ã‡§ó‡•Ä‡•§\n\n`;
          if (selected.length > 0) {
            msg += `‡§Ü‡§™‡§ï‡•ã ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§∏‡•á ‡§¨‡•Å‡§≤‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `‡§™‡•Ç‡§∞‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§î‡§∞ RSVP ‡§ï‡•á ‡§≤‡§ø‡§è:\n`;
          msg += `${siteLink}\n\n`;
          msg += `‡§Ü‡§™‡§ï‡§æ ‡§∏‡§æ‡§• ‡§á‡§∏ ‡§Æ‡•å‡§ï‡•á ‡§ï‡•ã ‡§î‡§∞ ‡§ñ‡§æ‡§∏ ‡§¨‡§®‡§æ ‡§¶‡•á‡§ó‡§æ‡•§\n\n`;
          msg += signOff;
        }
        
        // FORMAL
        else {
          msg += `‡•• ‡§∂‡•ç‡§∞‡•Ä ‡§ó‡§£‡•á‡§∂‡§æ‡§Ø ‡§®‡§Æ‡§É ‡••\n\n`;
          msg += `‡§Ü‡§¶‡§∞‡§£‡•Ä‡§Ø ${name || "‡§ú‡•Ä"},\n\n`;
          msg += `‡§∏‡§æ‡§¶‡§∞ ‡§ö‡§∞‡§£ ‡§∏‡•ç‡§™‡§∞‡•ç‡§∂‡•§\n\n`;
          msg += `‡§≠‡§ó‡§µ‡§æ‡§® ‡§∂‡•ç‡§∞‡•Ä ‡§ó‡§£‡•á‡§∂ ‡§ï‡•Ä ‡§ï‡•É‡§™‡§æ ‡§î‡§∞ ‡§Ü‡§™ ‡§∏‡§≠‡•Ä ‡§¨‡§°‡§º‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§∂‡•Ä‡§∞‡•ç‡§µ‡§æ‡§¶ ‡§∏‡•á, ‡§π‡§Æ‡•á‡§Ç ‡§Ø‡§π ‡§∂‡•Å‡§≠ ‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞ ‡§¶‡•á‡§§‡•á ‡§π‡•Å‡§è ‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§π‡§∞‡•ç‡§∑ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à ‡§ï‡§ø ‡§Ö‡§Ç‡§ï‡•Å‡§∂ ‡§î‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§§‡§ø ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§æ‡§π ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§π‡•Å‡§Ü ‡§π‡•à‡•§\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `‡§µ‡§ø‡§µ‡§æ‡§π ‡§ï‡•á ‡§∏‡§Æ‡§•‡§§ ‡§∂‡•Å‡§≠ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§á‡§∏ ‡§´‡§º‡§∞‡§µ‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§≤‡§ï‡§æ‡§§‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§™‡§®‡•ç‡§® ‡§π‡•ã‡§Ç‡§ó‡•á‡•§ ‡§á‡§∏ ‡§∂‡•Å‡§≠ ‡§Ö‡§µ‡§∏‡§∞ ‡§™‡§∞ ‡§Ü‡§™‡§ï‡•Ä ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§è‡§µ‡§Ç ‡§Ü‡§∂‡•Ä‡§∞‡•ç‡§µ‡§æ‡§¶ ‡§™‡§æ‡§ï‡§∞ ‡§π‡§Æ ‡§ß‡§®‡•ç‡§Ø ‡§π‡•ã‡§Ç‡§ó‡•á‡•§\n\n`;
          if (selected.length > 0) {
            msg += `‡§Ü‡§™‡§∏‡•á ‡§µ‡§ø‡§®‡§Æ‡•ç‡§∞ ‡§®‡§ø‡§µ‡•á‡§¶‡§® ‡§π‡•à ‡§ï‡§ø ‡§™‡§ß‡§æ‡§∞‡§ï‡§∞ ‡§π‡§Æ‡•á‡§Ç ‡§ï‡•É‡§§‡§æ‡§∞‡•ç‡§• ‡§ï‡§∞‡•á‡§Ç:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§è‡§µ‡§Ç RSVP ‡§π‡•á‡§§‡•Å:\n`;
          msg += `${siteLink}\n\n`;
          msg += `‡§Ü‡§™‡§ï‡§æ ‡§Ü‡§∂‡•Ä‡§∞‡•ç‡§µ‡§æ‡§¶ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§≤‡§ø‡§è ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§â‡§™‡§π‡§æ‡§∞ ‡§π‡•ã‡§ó‡§æ‡•§\n\n`;
          msg += signOff;
        }
      }

      // ==================== BANGLA ====================
      if (lang === "bn") {

        // CASUAL
        if (tone === "casual") {
          msg += `‡¶è‡¶á ${name || "‡¶∞‡ßá"}! üëã\n\n`;
          msg += `‡¶∂‡ßã‡¶® ‚Äì ‡¶Ö‡¶ô‡ßç‡¶ï‡ßÅ‡¶∂ ‡¶Ü‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶§‡ßÄ‡¶∞ ‡¶¨‡¶ø‡¶Ø‡¶º‡ßá! üéâ\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ‡¶Ø‡¶º ‡¶π‡¶¨‡ßá, ‡¶§‡ßÅ‡¶á ‡¶®‡¶æ ‡¶è‡¶≤‡ßá ‡¶π‡¶¨‡ßá ‡¶®‡¶æ!\n\n`;
          if (selected.length > 0) {
            msg += `‡¶§‡ßã‡¶∞ ‡¶®‡ßá‡¶Æ‡¶®‡ßç‡¶§‡¶®‡ßç‡¶®:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `‡¶∏‡¶¨ details ‡¶è‡¶ñ‡¶æ‡¶®‡ßá:\n`;
          msg += `${siteLink}\n\n`;
          msg += `‡¶ú‡¶æ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡ßá ‡¶Ø‡ßá ‡¶Ü‡¶∏‡¶õ‡¶ø‡¶∏ ‚Äì ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶π‡¶¨‡ßá!\n\n`;
          msg += signOff;
        }

        // NEUTRAL
        else if (tone === "neutral") {
          msg += `‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ${name || "‡¶¶‡¶æ/‡¶¶‡¶ø‡¶¶‡¶ø"},\n\n`;
          msg += `‡¶ñ‡ßÅ‡¶¨ ‡¶Ü‡¶®‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ú‡¶æ‡¶®‡¶æ‡¶ö‡ßç‡¶õ‡¶ø ‡¶Ø‡ßá ‡¶Ö‡¶ô‡ßç‡¶ï‡ßÅ‡¶∂ ‡¶Ü‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶§‡ßÄ‡¶∞ ‡¶¨‡¶ø‡¶Ø‡¶º‡ßá ‡¶†‡¶ø‡¶ï ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! üíê\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `‡¶è‡¶á ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ‡¶Ø‡¶º ‡¶¨‡¶ø‡¶Ø‡¶º‡ßá‡¶∞ ‡¶∏‡¶¨ ‡¶Ö‡¶®‡ßÅ‡¶∑‡ßç‡¶†‡¶æ‡¶® ‡¶π‡¶¨‡ßá‡•§ ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶è‡¶≤‡ßá ‡¶∏‡¶§‡ßç‡¶Ø‡¶ø‡¶á ‡¶ñ‡ßÅ‡¶¨ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá‡•§\n\n`;
          if (selected.length > 0) {
            msg += `‡¶§‡ßã‡¶Æ‡¶æ‡¶Ø‡¶º ‡¶∏‡¶æ‡¶¶‡¶∞ ‡¶®‡ßá‡¶Æ‡¶®‡ßç‡¶§‡¶®‡ßç‡¶®:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶∞ RSVP-‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø:\n`;
          msg += `${siteLink}\n\n`;
          msg += `‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø‡¶§‡ßá ‡¶Ü‡¶®‡¶®‡ßç‡¶¶‡¶ü‡¶æ ‡¶ú‡¶Æ‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§\n\n`;
          msg += signOff;
        }

        // FORMAL
        else {
          msg += `‡•• ‡¶∂‡ßç‡¶∞‡ßÄ ‡¶ó‡¶£‡ßá‡¶∂‡¶æ‡¶Ø‡¶º ‡¶®‡¶Æ‡¶É ‡••\n\n`;
          msg += `‡¶∂‡ßç‡¶∞‡¶¶‡ßç‡¶ß‡ßá‡¶Ø‡¶º ${name || "‡¶ï‡¶æ‡¶ï‡ßÅ/‡¶ï‡¶æ‡¶ï‡¶ø‡¶Æ‡¶æ"},\n\n`;
          msg += `‡¶∏‡¶∂‡ßç‡¶∞‡¶¶‡ßç‡¶ß ‡¶™‡ßç‡¶∞‡¶£‡¶æ‡¶Æ ‡¶®‡ßá‡¶¨‡ßá‡¶®‡•§\n\n`;
          msg += `‡¶∂‡ßç‡¶∞‡ßÄ ‡¶ó‡¶£‡ßá‡¶∂‡ßá‡¶∞ ‡¶ï‡ßÉ‡¶™‡¶æ ‡¶ì ‡¶Ü‡¶™‡¶®‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶ú‡¶®‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶∂‡ßÄ‡¶∞‡ßç‡¶¨‡¶æ‡¶¶‡ßá ‡¶Ö‡¶ô‡ßç‡¶ï‡ßÅ‡¶∂ ‡¶ì ‡¶∏‡ßç‡¶¨‡¶æ‡¶§‡ßÄ‡¶∞ ‡¶∂‡ßÅ‡¶≠ ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π ‡¶∏‡ßç‡¶•‡¶ø‡¶∞ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‚Äì ‡¶è ‡¶∏‡¶Ç‡¶¨‡¶æ‡¶¶ ‡¶ú‡¶æ‡¶®‡¶æ‡¶§‡ßá ‡¶™‡ßá‡¶∞‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶Ü‡¶®‡¶®‡ßç‡¶¶‡¶ø‡¶§‡•§\n\n`;
          if (note) msg += `${note}\n\n`;
          msg += `‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ‡¶Ø‡¶º ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶∂‡ßÅ‡¶≠ ‡¶Ö‡¶®‡ßÅ‡¶∑‡ßç‡¶†‡¶æ‡¶® ‡¶π‡¶¨‡ßá‡•§ ‡¶è‡¶á ‡¶Æ‡¶æ‡¶ô‡ßç‡¶ó‡¶≤‡¶ø‡¶ï ‡¶â‡¶™‡¶≤‡¶ï‡ßç‡¶∑‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶≠ ‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø ‡¶ì ‡¶Ü‡¶∂‡ßÄ‡¶∞‡ßç‡¶¨‡¶æ‡¶¶ ‡¶™‡ßá‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ß‡¶®‡ßç‡¶Ø ‡¶π‡¶¨‡•§\n\n`;
          if (selected.length > 0) {
            msg += `‡¶¨‡¶ø‡¶®‡ßÄ‡¶§ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß, ‡¶Ö‡¶®‡ßÅ‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá ‡¶è‡¶∏‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶∂‡ßÄ‡¶∞‡ßç‡¶¨‡¶æ‡¶¶ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®:\n`;
            msg += `ü™∑ *${formatEventList(lang, [...selected])}*\n\n`;
          }
          msg += `‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶ì RSVP-‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø:\n`;
          msg += `${siteLink}\n\n`;
          msg += `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶∂‡ßÄ‡¶∞‡ßç‡¶¨‡¶æ‡¶¶‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶¨‡¶°‡¶º ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶§‡¶ø‡•§\n\n`;
          msg += signOff;
        }
      }

      return msg;
    }

    function updateSendLinks(msg) {
      const lang = document.getElementById("language").value;
      const encoded = encodeURIComponent(msg);
      const subject = encodeURIComponent(emailSubjects[lang]);

      document.getElementById("whatsappBtn").href = `https://wa.me/?text=${encoded}`;
      document.getElementById("emailBtn").href = `mailto:?subject=${subject}&body=${encoded}`;
      document.getElementById("smsBtn").href = `sms:?&body=${encoded}`;
    }

    function updateCharCount(msg) {
      const count = msg.length;
      const el = document.getElementById("charCount");
      el.textContent = `${count} characters`;
      el.classList.remove("warning", "danger");
      if (count > 1600) {
        el.classList.add("danger");
        el.textContent += " (very long for SMS)";
      } else if (count > 800) {
        el.classList.add("warning");
        el.textContent += " (may split into multiple SMS)";
      }
    }

    document.getElementById("generateBtn").addEventListener("click", () => {
      const msg = buildMessage();
      document.getElementById("output").value = msg;

      document.getElementById("sendLabel").classList.remove("hidden");
      document.getElementById("whatsappBtn").classList.remove("hidden");
      document.getElementById("emailBtn").classList.remove("hidden");
      document.getElementById("smsBtn").classList.remove("hidden");
      document.getElementById("copyBtn").classList.remove("hidden");

      updateSendLinks(msg);
      updateCharCount(msg);
    });

    document.getElementById("copyBtn").addEventListener("click", () => {
      const output = document.getElementById("output");
      output.select();
      output.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(output.value).then(() => {
        const btn = document.getElementById("copyBtn");
        btn.innerHTML = "‚úì Copied!";
        setTimeout(() => { btn.innerHTML = "üìã Copy"; }, 2000);
      });
    });
  </script>
</body>
</html>